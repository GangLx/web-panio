<!DOCTYPE html>
<html>
    <head>
        <title>Panio</title>
        <style>
            .panio-div {
                position: absolute;
                bottom: 10px;
                display: none;
            }
            .panio-div span {
                width: 30px;
                height: 150px;
                background-color: white;
                display: inline-block;
                border: 1px black solid;
                margin: 0;
                line-height: 150px;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <div class="panio-div">
            <span onclick="btn_do(1)">1</span>
            <span onclick="btn_do(2)">2</span>
            <span onclick="btn_do(3)">3</span>
            <span onclick="btn_do(4)">4</span>
            <span onclick="btn_do(5)">5</span>
            <span onclick="btn_do(6)">6</span>
            <span onclick="btn_do(7)">7</span>
            <span onclick="btn_do(8)">1</span>
        </div>
        <script>
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)()
            let oscillator = {node: null, state: null}
            function btn_do(value) {
                pause('click')
                oscillator.state = 'playing'
                oscillator.node = audioCtx.createOscillator()
                oscillator.node.type = 'square'
                oscillator.node.frequency.value = getFrequency(value) // oscillator.node.frequency.setValueAtTime(getFrequency(value), audioCtx.currentTime)
                oscillator.node.connect(audioCtx.destination)
                oscillator.node.start()
                setTimeout(() => {
                    pause('time')
                }, 300)
            }
            function pause(type) {
                console.log(type)
                if (oscillator.state === 'playing') {
                    oscillator.node.stop()
                    oscillator.state = null
                }
            }
            function getFrequency(value) {
                let frequency = 263.63
                value = parseInt(value)
                switch(value) {
                    case 1:
                        frequency = 263.63
                        break
                    case 2:
                        frequency = 293.66
                        break
                    case 3:
                        frequency = 329.63
                        break
                    case 4:
                        frequency = 349.23
                        break
                    case 5:
                        frequency = 392.00
                        break
                    case 6:
                        frequency = 440.00
                        break
                    case 7:
                        frequency = 493.88
                        break
                    case 8:
                        frequency = 523.25
                        break
                    default:
                        frequency = 263.63
                        break
                }
                return frequency
            }
            document.addEventListener('keyup', (e) => {
                btn_do(e.key)
            })
        </script>
    </body>
</html>